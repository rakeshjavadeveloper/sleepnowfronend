"use strict";!function(e){function t(e){e&&_q(".spanShippingPrice")&&(_q(".spanShippingPrice").innerHTML=e.priceShipping)}e?(!function(){if(_q(".js-product-discount-info")){var e=_q(".js-product-discount-info .w_content");e.innerHTML=e.innerHTML.replace("{price_shipping}",'<span class="spanShippingPrice"></span>')}}(),e.events.on("bindProductDiscountInfo",t)):console.log("modules is not found")}(window.utils),function(e){function t(e){e&&_q(".spanShippingPrice")&&(_q(".spanShippingPrice").innerHTML=e.priceShipping)}e?(!function(){if(_q(".js-product-discount-info")){var e=_q(".js-product-discount-info .w_content");e.innerHTML=e.innerHTML.replace("{price_shipping}",'<span class="spanShippingPrice"></span>')}}(),e.events.on("bindProductDiscountInfo",t)):console.log("modules is not found")}(window.utils),function(n){function r(){var e=i();n.events.emit("triggerWarranty",e),n.events.emit("triggerInstallmentPayment",{discountPrice:e.productPrices.DiscountedPrice.FormattedValue,discountPriceValue:e.productPrices.DiscountedPrice.Value,fullPrice:e.productPrices.FullRetailPrice.FormattedValue,fullPriceValue:e.productPrices.FullRetailPrice.Value})}function i(){var e=_q('input[name="product"]:checked').dataset.product;return e?JSON.parse(e):null}n?siteSetting?(!function(){if(_qById("js-widget-products")){var e=_qAll(".js-unitDiscountRate");e&&Array.prototype.slice.call(e).forEach(function(e){e.innerHTML=e.innerHTML.replace("{UnitDiscountRate}",'<span class="spanUnitDiscountRate">$00.00</span>')})}}(),new EmanageCRMJS({webkey:siteSetting.webKey,cid:siteSetting.CID,lang:"",isTest:!!n.getQueryParameter("isCardTest")}).Campaign.getProducts(function(e){if(!(e instanceof Error)&&0<e.prices.length){console.log(e),Array.prototype.slice.call(e.prices).forEach(function(e){try{var t=_qById("product_"+e.productId);if(t){t.setAttribute("data-product",JSON.stringify(e)),t.onchange=r;var n=_q('label[for="product_'+e.productId+'"] span.spanUnitDiscountRate'),i=_q("#discountedPrice_"+e.productId);n&&(n.innerHTML=e.productPrices.UnitDiscountRate.FormattedValue),i&&(i.innerHTML=e.productPrices.DiscountedPrice.FormattedValue)}}catch(e){console.log(e)}}),siteSetting.countryCode=e.location.countryCode;try{var t=function(){var e=null;try{var t=_qById("hdfSelectedProduct").value,n=JSON.parse(_qById("product_"+t).dataset.product),i=n.shippings[0],r="";r=0==i.price?window.js_translate&&window.js_translate.free?window.js_translate.free:"free":i.formattedPrice,e={priceShipping:r,discountPrice:n.productPrices.DiscountedPrice.FormattedValue,discountPriceValue:n.productPrices.DiscountedPrice.Value,fullPrice:n.productPrices.FullRetailPrice.FormattedValue,fullPriceValue:n.productPrices.FullRetailPrice.Value,currencyCode:null!=n.productPrices.FullRetailPrice.GlobalCurrencyCode?n.productPrices.FullRetailPrice.GlobalCurrencyCode:""}}catch(e){console.log("getHiddenSelectedProduct : ",e)}return e}();n.events.emit("bindProductDiscountInfo",t),n.localStorage().set("countryCode",e.location.countryCode),n.events.emit("triggerAddressForm",e.location.countryCode),n.events.emit("triggerProductBannerSidebar",t),n.events.emit("triggerWarranty",i()),n.events.emit("bindOrderPage",t),n.events.emit("triggerInstallmentPayment",t)}catch(e){console.log(e)}}})):console.log("window.siteSetting object is not found"):console.log("modules is not found")}(window.utils),function(e){function t(e){if(_qById("js-widget-productwarranty")&&e)try{var t=_qById("txtProductWarranty").value,n=[.1,.2,.2,.2,.2,.3,.5,.15,.25,.35,.4,.45,.55,.6][parseInt(t)-1],i=e.productPrices.DiscountedPrice.FormattedValue.replace(/[,|.]/,""),r=e.productPrices.DiscountedPrice.Value.toString().replace(/\./,""),o=i.replace(r,"######").replace(/\d/g,""),a=(Math.round(100*e.productPrices.DiscountedPrice.Value*n)/100).toFixed(2);0<=e.productPrices.DiscountedPrice.FormattedValue.indexOf(",")&&(a=a.toString().replace(".",",")),_q("span.spanWarrantyPrice")&&(_q("span.spanWarrantyPrice").innerHTML=o.replace("######",a))}catch(e){console.log("init Warranty error: ",e)}}e?(!function(){if(_qById("js-widget-productwarranty")){var e=_q(".w_warranty_content");e.innerHTML=e.innerHTML.replace("{warrantyPrice}",'<span class="spanWarrantyPrice"></span>')}}(),e.events.on("triggerWarranty",t)):console.log("utils module is not found")}(window.utils),function(e){function t(e){e&&_q(".js-product-banner-sidebar .textShippingPrice")&&(_q(".js-product-banner-sidebar .textShippingPrice").innerHTML=e.priceShipping)}e?(!function(){if(_q(".js-product-banner-sidebar")){var e=_q(".js-product-banner-sidebar .js-text");e&&(e.innerHTML=e.innerHTML.replace("{price_shipping}",'<span class="textShippingPrice"></span>'))}}(),e.events.on("triggerProductBannerSidebar",t)):console.log("utils module is not found")}(window.utils),window.utils?document.addEventListener("DOMContentLoaded",function(){var e;(e=_qById("creditcard_method"))&&(e.onclick=function(e){_q(".widget-customer-form")&&(_q(".widget-customer-form").classList.remove("hidden"),_q(".widget-customer-form").scrollIntoView()),_q(".widget-installpayment-form")&&_q(".widget-installpayment-form").classList.remove("hidden"),_q(".widget-creditcard-form")&&_q(".widget-creditcard-form").classList.remove("hidden"),_q(".widget-shipping-form")&&_q(".widget-shipping-form").classList.remove("hidden"),_q(".widget-billing-form")&&_q(".widget-billing-form").classList.remove("hidden"),_qById("js-basic-paypal-cta-button")&&_qById("js-basic-paypal-cta-button").classList.add("hidden"),_qById("js-basic-cta-button")&&(_qById("js-basic-cta-button").classList.remove("hidden"),_qById("js-basic-cta-button").style.display="block")})}):console.log("utils module is not found"),function(r){if(r)if(siteSetting){var o=null,n=new EmanageCRMJS({webkey:siteSetting.webKey,cid:siteSetting.CID,lang:"",isTest:!!r.getQueryParameter("isCardTest")});document.addEventListener("DOMContentLoaded",function(){e()})}else console.log("window.siteSetting object is not found");else console.log("modules is not found");function e(){_q("#js-paypal-oneclick-button .w_radio").addEventListener("click",function(e){e.preventDefault(),function(){var e=_q(".paypal-loading-overlay");e&&(e.style.display="block");var t=function(e){var t="",n=_qById("couponCode");t=n?n.value:""!==r.getQueryParameter("couponCode")?r.getQueryParameter("couponCode"):"";return o=function(){if(!_q('input[name="product"]:checked'))return null;var e=_q('input[name="product"]:checked').dataset.product;return e?JSON.parse(e):null}(),{couponCode:t,shippingMethodId:0<o.shippings.length?o.shippings[0].shippingMethodId:null,comment:"",useShippingAddressForBilling:!0,productId:o.productId,customer:{email:null,phoneNumber:null,firstName:null,lastName:null},payment:{paymentProcessorId:5},shippingAddress:null,billingAddress:null,funnelBoxId:_qById("txtProductWarranty").checked?_qById("txtProductWarranty").value:0}}();n.Order.placeOrder(t,"paypal",function(e){if(r.localStorage().set("mainOrderLink",location.pathname),r.localStorage().set("userPaymentType","paypal"),e&&e.success)if(r.localStorage().set("paypal_isMainOrder","main"),n=e,i={orderParams:location.search.substr(1),upsells:n.upsells,upsellIndex:0,countryCode:siteSetting.countryCode,orderNumber:n.orderNumber,cusEmail:""===_qById("customer_email").value?null:_qById("customer_email").value,cardId:n.cardId,paymentProcessorId:n.paymentProcessorId,addressId:n.customerResult.shippingAddressId,savedTotal:o.productPrices.FullRetailPrice.Value-o.productPrices.DiscountedPrice.Value},r.localStorage().set("orderInfo",JSON.stringify(i)),r.localStorage().set("webkey_to_check_paypal",siteSetting.webKey),e.callBackUrl)document.location=e.callBackUrl;else if(e.paymentContinueResult&&""!==e.paymentContinueResult.actionUrl)document.location=e.paymentContinueResult.actionUrl;else if(0<e.upsells.length&&""!==e.upsells[0].upsellUrl){var t=e.upsells[0].upsellUrl.substr(e.upsells[0].upsellUrl.lastIndexOf("/")+1);location.href=t}else r.redirectPage(siteSetting.successUrl);else r.redirectPage(siteSetting.declineUrl);var n,i})}()})}}(window.utils),function(l){if(l){var c="frmCustomer";window.widget=window.widget?window.widget:{},window.widget.customer={getCustomerInfo:function(){var e=_qById("customer_firstname")?_qById("customer_firstname").value:_qById("shipping_firstname").value,t=_qById("customer_lastname")?_qById("customer_lastname").value:_qById("shipping_lastname").value,n="";_qById("customer_cpf")&&(n=_qById("customer_cpf").value);var i={email:_qById("customer_email").value,phoneNumber:_qById("customer_phone").value,firstName:e,lastName:t};return""!==n&&(i.customerIdentificationValue=n,i.customerIdentificationTypeId=1,i.phoneNumber=_qById("customer_phone").value.replace(/\(|\)|\ |\-|\+/gi,"")),i}},l.customerForm={isValid:function(){var e=document.forms[c];if(e){var t=e.getElementsByTagName("input");if(t&&0<t.length){var n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;l.validateInput(s)}}catch(e){i=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}}}var d=_qById("customer_cpf");return d&&(p(d)?l.removeInputError(d):l.addInputError(d)),!_q("#"+c+" input.input-error")}},document.addEventListener("DOMContentLoaded",function(){e()})}else console.log("utils module is not found");function e(){var e=document.forms[c];if(e){var o=e.getElementsByTagName("input"),t=function(e){var t,n,i,r=o[e];if("customer_cpf"===r.id)return(n=r).addEventListener("keypress",function(e){var t=e.which||e.keyCode,n="";if(8!==t)return 47<t&&t<58||8==t||46==t||36<t&&t<41||15<t&&t<19||9==t||13==t?(11<=(n=this.value.toString().replace(/\-/g,"").replace(/\./g,"").substring(0,11)).length&&e.preventDefault(),this.value=u(n),!0):void e.preventDefault()}),n.addEventListener("keyup",function(e){var t=this.value.toString().replace(/\-/g,"").replace(/\./g,"").substring(0,11);this.value=u(t)}),(t=r).addEventListener("blur",function(e){p(this)?l.removeInputError(this):l.addInputError(this)}),t.addEventListener("change",function(e){p(this)?l.removeInputError(this):l.addInputError(this)}),t.addEventListener("keyup",function(e){p(this)?l.removeInputError(this):l.addInputError(this)}),"continue";null!=r.attributes.phonebr&&((i=r).addEventListener("keypress",function(e){var t=e.which||e.keyCode,n="";if(47<t&&t<58||8==t||46==t||36<t&&t<41||15<t&&t<19||9==t||13==t)return 13<=(n=this.value.toString().replace(/\(|\)|\ |\-|\+/gi,"").substring(0,13)).length&&e.preventDefault(),this.value=d(n),!0;e.preventDefault()}),i.addEventListener("keyup",function(e){var t=this.value.toString().replace(/\(|\)|\ |\-|\+/gi,"").substring(0,13);this.value=d(t)})),r.addEventListener("blur",function(e){l.validateInput(this),"customer_email"===r.id&&function(e){if(!e.classList.contains("input-error"))if(window.siteSetting&&""!==window.siteSetting.campaignName){var t="https://sales-prod.tryemanagecrm.com/api/customers/"+siteSetting.webKey,n={method:"POST",data:{email:e.value,customerIdentificationTypeId:4,customerIdentificationValue:siteSetting.campaignName},headers:{X_CID:siteSetting.CID}};l.callAjax(t,n).then(function(e){return console.log(e)}).catch(function(e){return console.log(e)})}else console.log("siteSetting is null")}(r)}),r.addEventListener("change",function(e){l.validateInput(this)}),r.addEventListener("keyup",function(e){l.validateInput(this)})},n=!0,i=!1,r=void 0;try{for(var a,s=Object.keys(o)[Symbol.iterator]();!(n=(a=s.next()).done);n=!0)t(a.value)}catch(e){i=!0,r=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}}}function d(e){var t="";return 4<(t=e=e.replace(/\(|\)|\ |\-|\+/gi,"")).length&&e.length<=9&&(t=e.slice(0,-4)+"-"+e.slice(-4,13)),10===e.length&&(t="("+e.substring(0,2)+") "+e.substring(2,6)+"-"+e.substring(6,e.length)),11===e.length&&(t="("+e.substring(0,2)+") "+e.substring(2,7)+"-"+e.substring(7,e.length)),12===e.length&&(t="+"+e.substring(0,2)+" ("+e.substring(2,4)+") "+e.substring(4,8)+"-"+e.substring(8,e.length)),13===e.length&&(t="+"+e.substring(0,2)+" ("+e.substring(2,4)+") "+e.substring(4,9)+"-"+e.substring(9,e.length)),t}function u(e){for(var t="",n=[],i=0,r=(e=e.replace(/\./gi,"").replace(/\-/gi,"")).length;i<r;i+=3)n.length<4&&n.push(e.substring(i,i+3));for(var o=0,a=n.length;o<a;o++)t+=o<3?"."+n[o]:"-"+n[o];return t.substr(1)}function p(e){var t=e.value;if(""===t.trim())return!1;var n,i,r,o=!0;for(n=0,11===(t=t.replace(/\./gi,"").replace(/-/gi,"")).length&&"00000000000"!==t&&"11111111111"!==t&&"22222222222"!==t&&"33333333333"!==t&&"44444444444"!==t&&"55555555555"!==t&&"66666666666"!==t&&"77777777777"!==t&&"88888888888"!==t&&"99999999999"!==t||(o=!1),r=1;r<=9;r++)n+=parseInt(t.substring(r-1,r),10)*(11-r);for(10!==(i=10*n%11)&&11!==i||(i=0),i!==parseInt(t.substring(9,10),10)&&(o=!1),n=0,r=1;r<=10;r++)n+=parseInt(t.substring(r-1,r),10)*(12-r);return 10!==(i=10*n%11)&&11!==i||(i=0),i!==parseInt(t.substring(10,11),10)&&(o=!1),o}}(window.utils),function(u){if(u){var n=new EmanageCRMJS({webkey:siteSetting.webKey,cid:siteSetting.CID,lang:"",isTest:!!u.getQueryParameter("isCardTest")}),p="frmShipping";u.events.on("triggerAddressForm",e),n.Campaign.getCountries(function(e){if(Array.isArray(e)){window.countries=Array.prototype.slice.call(e);var t=_qById("shipping_country"),n=void 0;Array.prototype.slice.call(e).forEach(function(e){(n=_createElem("option")).text=e.countryName,n.value=e.countryCode,t.appendChild(n)});var i=u.localStorage().get("countryCode");i&&(_q('#shipping_country option[value="'+i+'"]')&&(t.value=i),r(t.value)),t.addEventListener("change",o)}}),window.widget=window.widget?window.widget:{},window.widget.shipping={getShippingAddress:function(){return{firstName:_qById("customer_firstname")?_qById("customer_firstname").value:_qById("shipping_firstname").value,lastName:_qById("customer_lastname")?_qById("customer_lastname").value:_qById("shipping_lastname").value,address1:_qById("shipping_address1").value,address2:"",city:_qById("shipping_city").value,countryCode:_qById("shipping_country").value,state:_qById("shipping_province").value,zipCode:_qById("shipping_postal").value,phoneNumber:_qById("customer_phone").value}},isValid:function(){var e=document.forms[p];if(e){var t=e.getElementsByTagName("input");if(t&&0<t.length){var n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;u.validateInput(s)}}catch(e){i=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}}}var d=!_q("#"+p+" input.input-error"),l=_qById("shipping_province");u.validateInput(l);var c=!_q("#"+p+" select.input-error");return d&&c}},document.addEventListener("DOMContentLoaded",function(){!function(){var e=document.forms[p];if(e){var t=e.getElementsByTagName("input"),n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.addEventListener("blur",function(e){u.validateInput(this)}),s.addEventListener("change",function(e){u.validateInput(this)}),s.addEventListener("keyup",function(e){u.validateInput(this)})}}catch(e){i=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}_qById("shipping_province").addEventListener("change",function(e){u.validateInput(this)})}}(),function(){try{var e=_qAll(".shipping_address_field"),t=_qById("shipping_address1"),n=_qById("shipping_streetname"),i=_qById("shipping_streetnumber");if(!n&&!i)return;var r=!0,o=!1,a=void 0;try{for(var s,d=e[Symbol.iterator]();!(r=(s=d.next()).done);r=!0)s.value.addEventListener("keyup",function(){t.value=i.value+" "+n.value})}catch(e){o=!0,a=e}finally{try{!r&&d.return&&d.return()}finally{if(o)throw a}}}catch(e){console.log("error: ",e)}}()})}else console.log("utils module is not found");function e(e){var t=_qById("shipping_country");t&&e&&(_q('#shipping_country option[value="'+e+'"]')&&(t.value=e),r(t.value)),i(e)}function r(t){if(window.countries&&t){var e=countries.filter(function(e){return e.countryCode===t})[0];if(e){var n=_qById("shipping_postal");e.postalCodeRegex?n.setAttribute("pattern",e.postalCodeRegex):n.removeAttribute("pattern")}}}function o(){_qById("shipping_province").setAttribute("disabled","true"),i(this.value),r(this.value)}function i(e){var d=_qById("shipping_province");u.removeInputError(d);var t=_qAll("#shipping_province option");Array.prototype.slice.call(t).forEach(function(e){return e.parentNode.remove(e)}),n.Campaign.getCountryStates(e,function(e){window.states=Array.prototype.slice.call(e),d.setAttribute("required","");var t=void 0;if((t=_createElem("option")).text="----",t.value="",d.appendChild(t),e instanceof Error||void 0===e)d.removeAttribute("required");else{var n=!0,i=!1,r=void 0;try{for(var o,a=Object.keys(e)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;(t=_createElem("option")).text=e[s].StateName,t.value=e[s].StateCode,d.appendChild(t)}}catch(e){i=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}d.removeAttribute("disabled"),u.events.emit("shippingStatesUpdated")}})}}(window.utils),function(e,f){var a=_qAll('input[id$="_address1"]');if(0!==a.length){var t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCNfkLr7y20yUe-263iDsVwu1Q1LcmmiAY&libraries=places&callback=initAutocomplete",t.setAttribute("async",""),t.setAttribute("defer",""),document.querySelector("body").appendChild(t),e.initAutocomplete=function(){var e=function(e){var t=new google.maps.places.Autocomplete(e,{types:["geocode"]});t.addListener("place_changed",function(){!function(e,t){var n=t.getPlace().address_components,i=v("street_number",n),r=v("route",n),o=v("locality",n),a=e.querySelector('input[id$="_address1"]');a&&(a.value=i+" "+r+(""!==o?", "+o:""));var s=e.querySelector('input[id$="_city"]');s&&(s.value=v("administrative_area_level_1",n));var d=e.querySelector('select[id$="_country"]');if(d){var l=v("country",n,"short_name");if(d.querySelector('option[value="'+l+'"]')){d.value=l;var c=new Event("change");d.dispatchEvent(c);var u=e.querySelector('select[id$="_province"]'),p=v("administrative_area_level_1",n,"short_name");u&&"shipping_province"===u.id&&f.events.on("shippingStatesUpdated",function(){u.querySelector('option[value="'+p+'"]')&&(u.value=p)}),u&&"billing_province"===u.id&&f.events.on("billingStatesUpdated",function(){u.querySelector('option[value="'+p+'"]')&&(u.value=p)})}}var m=e.querySelector('input[id$="_postal"]');m&&(m.value=v("postal_code",n,"short_name"))}(e.closest("form"),t)})},t=!0,n=!1,i=void 0;try{for(var r,o=a[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){e(r.value)}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}}}function v(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"long_name",i=e.filter(function(e){return e.types[0]===t});return 0<i.length?i[0][n]:""}}(window,window.utils),function(a){function t(e,t){var n=[];n[0]="Unknown card type",n[1]="No card number provided",n[2]="Credit card number is in invalid format",n[3]="Credit card number is invalid",n[4]="Credit card number has an inappropriate number of digits",n[5]="Warning! This credit card number is associated with a scam attempt";var i=new Array;i[0]={name:"Visa",length:"13,16",prefixes:"4",checkdigit:!0},i[1]={name:"Master",length:"16",prefixes:"51,52,53,54,55",checkdigit:!0},i[2]={name:"DinersClub",length:"14,16",prefixes:"36,38,54,55",checkdigit:!0},i[3]={name:"CarteBlanche",length:"14",prefixes:"300,301,302,303,304,305",checkdigit:!0},i[4]={name:"AmEx",length:"15",prefixes:"34,37",checkdigit:!0},i[5]={name:"Discover",length:"16,17,18,19",prefixes:"6011,622,644,645,646,647,648,649,65",checkdigit:!0},i[6]={name:"JCB",length:"16",prefixes:"35",checkdigit:!0},i[7]={name:"enRoute",length:"15",prefixes:"2014,2149",checkdigit:!0},i[8]={name:"Solo",length:"16,18,19",prefixes:"6334,6767",checkdigit:!0},i[9]={name:"Switch",length:"16,18,19",prefixes:"4903,4905,4911,4936,564182,633110,6333,6759",checkdigit:!0},i[10]={name:"Maestro",length:"12,13,14,15,16,18,19",prefixes:"5018,5020,5038,6304,6759,6761,6762,6763",checkdigit:!0},i[11]={name:"VisaElectron",length:"16",prefixes:"4026,417500,4508,4844,4913,4917",checkdigit:!0},i[12]={name:"LaserCard",length:"16,17,18,19",prefixes:"6304,6706,6771,6709",checkdigit:!0};for(var r=-1,o=0;o<i.length;o++)if(t.toLowerCase()==i[o].name.toLowerCase()){r=o;break}if(-1==r)return 0,!1;if(0==e.length)return!1;var a=e=e.replace(/\s/g,"");if(!/^[0-9]{13,19}$/.exec(a))return!2;if(i[r].checkdigit){var s,d=0,l=1;for(o=a.length-1;0<=o;o--)9<(s=Number(a.charAt(o))*l)&&(d+=1,s-=10),d+=s,l=1==l?2:1;if(d%10!=0)return!3}if("5490997771092064"==a)return!5;var c=!1,u=!1,p=new Array,m=new Array;for(p=i[r].prefixes.split(","),o=0;o<p.length;o++){new RegExp("^"+p[o]).test(a)&&(u=!0)}if(!u)return!3;for(m=i[r].length.split(","),l=0;l<m.length;l++)a.length==m[l]&&(c=!0);return!!c||!4}function i(e){return t(e,"Visa")?"Visa":t(e,"Master")?"Master":t(e,"AmEx")?"AmEx":t(e,"Discover")?"Discover":void 0}function n(e){if(null==e.dataset.cardnumber||""===e.dataset.cardnumber||e.dataset.cardnumber.formatString("0000-****-****-0000")!==e.value){var t=e.value.toString().replace(/\-/g,""),n=i(t);void 0===n?(e.value=t.formatString("0000-0000-0000-0000-000"),a.addInputError(e),e.setAttribute("data-cardnumber",""),e.setAttribute("data-cardtype","")):(a.removeInputError(e),e.setAttribute("data-cardnumber",t),e.setAttribute("data-cardtype",n),e.value=t.formatString("0000-0000-0000-0000-000"))}}function r(e){var t=e.value.toString().replace(/\-/g,"").replace(/\//g,"").substring(0,"00/00".length);e.value=t.formatString("00/00");var n=e.value.toString().split("/"),i=new Date,r=i.getFullYear().toString().substr(2),o=i.getMonth()+1;2!=n.length?a.addInputError(e):parseInt(n[0])<0||12<parseInt(n[0])?a.addInputError(e):parseInt(n[1])<parseInt(r)?a.addInputError(e):parseInt(n[1])===parseInt(r)&&parseInt(o)>parseInt(n[0])?a.addInputError(e):a.removeInputError(e)}function o(e){var t=e.value.toString().replace(/\-/g,"");t.length<3||4<t.length?a.addInputError(e):a.removeInputError(e)}function s(e){"AmEx"===i(e.value.toString().replace(/\-/g,""))?a.events.emit("bindInstallmentWithAmexCard","amex"):a.events.emit("bindInstallmentWithAmexCard","no_amex")}a.creditcardForm={isValid:function(){return n(_qById("creditcard_creditcardnumber")),r(_qById("creditcard_expirydate")),o(_qById("creditcard_cvv")),!_q("#frmCreditCard input.input-error")}},document.addEventListener("DOMContentLoaded",function(){var e,t;_qById("creditcard_creditcardnumber").addEventListener("keyup",function(){n(this),s(this)}),_qById("creditcard_creditcardnumber").addEventListener("blur",function(){n(this),s(this)}),_qById("creditcard_creditcardnumber").addEventListener("change",function(){n(this),s(this)}),a.maskNumber(_qById("creditcard_expirydate"),"00/00"),_qById("creditcard_expirydate").addEventListener("keyup",function(){r(this)}),_qById("creditcard_expirydate").addEventListener("blur",function(){r(this)}),_qById("creditcard_expirydate").addEventListener("change",function(){r(this)}),_qById("creditcard_cvv").addEventListener("keyup",function(){o(this)}),_qById("creditcard_cvv").addEventListener("blur",function(){o(this)}),_qById("creditcard_cvv").addEventListener("change",function(){o(this)}),(e=_q(".widget-creditcard-form .icon-question-circle"))&&e.addEventListener("click",function(e){e.preventDefault();var t=_q(".cvv_popup_overlay");t&&t.classList.add("open")}),(t=_q(".cvv_popup_overlay")).addEventListener("click",function(e){e.target.closest(".cvv_popup_content")||t.classList.remove("open")}),t.querySelector(".icon-close").addEventListener("click",function(e){t.classList.remove("open")})})}(window.utils),function(u){if(u){var t=new EmanageCRMJS({webkey:siteSetting.webKey,cid:siteSetting.CID,lang:"",isTest:!!u.getQueryParameter("isCardTest")}),p="frmBilling",n=!1;u.billingForm={isValid:function(){var e=document.forms[p];if(e){var t=e.getElementsByTagName("input");if(t&&0<t.length){var n=!0,i=!1,r=void 0;try{for(var o,a=Object.keys(t)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;u.validateInput(t[s])}}catch(e){i=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}}}var d=!_q("#"+p+" input.input-error"),l=_qById("billing_province");u.validateInput(l);var c=!_q("#"+p+" select.input-error");return d&&c}},document.addEventListener("DOMContentLoaded",function(){!function(){var e=_qAll('input[name="radio_choose_billing"]'),t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0)r.value.addEventListener("click",a)}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}}(),function(){var e=document.forms[p];if(e){var t=e.getElementsByTagName("input"),n=!0,i=!1,r=void 0;try{for(var o,a=Object.keys(t)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=t[o.value];s.addEventListener("blur",function(e){u.validateInput(this)}),s.addEventListener("change",function(e){u.validateInput(this)}),s.addEventListener("keyup",function(e){u.validateInput(this)})}}catch(e){i=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}_qById("billing_province").addEventListener("change",function(e){u.validateInput(this)})}}(),function(){try{var e=_qAll(".billing_address_field"),t=_qById("billing_address1"),n=_qById("billing_streetname"),i=_qById("billing_streetnumber");if(!n&&!i)return;var r=!0,o=!1,a=void 0;try{for(var s,d=e[Symbol.iterator]();!(r=(s=d.next()).done);r=!0)s.value.addEventListener("keyup",function(){t.value=i.value+" "+n.value})}catch(e){o=!0,a=e}finally{try{!r&&d.return&&d.return()}finally{if(o)throw a}}}catch(e){console.log("error: ",e)}}()})}else console.log("utils module is not found");function a(e){"radio_same_as_shipping"===this.id?_qById(p).classList.add("hidden"):"radio_different_shipping"===this.id&&(n||(!function(){if(!window.countries)return console.log("billing form can not bind countries");var t=_qById("billing_country"),n=void 0;window.countries.forEach(function(e){(n=_createElem("option")).text=e.countryName,n.value=e.countryCode,t.appendChild(n)});var e=u.localStorage().get("countryCode");e&&_q('#billing_country option[value="'+e+'"]')&&(t.value=e);t.addEventListener("change",i)}(),function(){if(!window.states)return console.log("billing form can not bind states");r(window.states)}(),n=!0),_qById(p).classList.remove("hidden"),!1,o(_qById("billing_country").value))}function i(){var e;_qById("billing_province").setAttribute("disabled","true"),e=this.value,t.Campaign.getCountryStates(e,function(e){r(e)}),o(this.value)}function r(e){var t=_qById("billing_province");u.removeInputError(t);var n=_qAll("#billing_province option");Array.prototype.slice.call(n).forEach(function(e){return e.parentNode.remove(e)}),t.setAttribute("required","");var i=void 0;if((i=_createElem("option")).text="----",i.value="",t.appendChild(i),e instanceof Error||void 0===e)t.removeAttribute("required");else{var r=!0,o=!1,a=void 0;try{for(var s,d=Object.keys(e)[Symbol.iterator]();!(r=(s=d.next()).done);r=!0){var l=s.value;(i=_createElem("option")).text=e[l].StateName,i.value=e[l].StateCode,t.appendChild(i)}}catch(e){o=!0,a=e}finally{try{!r&&d.return&&d.return()}finally{if(o)throw a}}t.removeAttribute("disabled"),u.events.emit("billingStatesUpdated")}}function o(t){if(window.countries&&t){var e=countries.filter(function(e){return e.countryCode===t})[0];if(e){var n=_qById("billing_postal");e.postalCodeRegex?n.setAttribute("pattern",e.postalCodeRegex):n.removeAttribute("pattern")}}}}(window.utils),function(m){if(m)if(siteSetting){var f=null,s=new EmanageCRMJS({webkey:siteSetting.webKey,cid:siteSetting.CID,lang:"",isTest:!!m.getQueryParameter("isCardTest")});document.addEventListener("DOMContentLoaded",function(){e()})}else console.log("window.siteSetting object is not found");else console.log("modules is not found");function e(){_qById("js-basic-cta-button").addEventListener("click",function(e){e.preventDefault(),function(e){var t=m.customerForm.isValid();{if(!_q('input[name="paymentmethod"]:checked'))return console.log("please select a payment method");var n=m.creditcardForm.isValid(),i=window.widget.shipping.isValid(),r=!0;if(_q(".widget-billing-form")){var o=_q('input[name="radio_choose_billing"]:checked');o&&"radio_different_shipping"===o.id&&(r=m.billingForm.isValid())}if(!(t&&i&&n&&r))return console.log("invalid data")}m.showAjaxLoading();var a=function(e){var t="",n=_qById("couponCode");t=n?n.value:""!==m.getQueryParameter("couponCode")?m.getQueryParameter("couponCode"):"";f=function(){if(!_q('input[name="product"]:checked'))return null;var e=_q('input[name="product"]:checked').dataset.product;return e?JSON.parse(e):null}();var i=!0;if(_q(".widget-billing-form")){var r=_q('input[name="radio_choose_billing"]:checked');r&&"radio_different_shipping"===r.id&&(i=!1)}var o=_qById("customer_firstname")?_qById("customer_firstname").value:_qById("shipping_firstname").value,a=_qById("customer_lastname")?_qById("customer_lastname").value:_qById("shipping_lastname").value,s=null;i||(s={firstName:_qById("billing_firstname").value,lastName:_qById("billing_lastname").value,address1:_qById("billing_address1").value,address2:"",city:_qById("billing_city").value,countryCode:_qById("billing_country").value,state:_qById("billing_province").value,zipCode:_qById("billing_postal").value,phoneNumber:_qById("billing_phone").value});var d=_qById("creditcard_expirydate"),l=_qById("cardExpirationMonth"),c=_qById("cardExpirationYear"),u="";d?u=d.value.replace("/","/20"):l&&c&&(u=l.value+"/"+c.value);var p={couponCode:t,shippingMethodId:0<f.shippings.length?f.shippings[0].shippingMethodId:null,comment:"",useShippingAddressForBilling:i,productId:f.productId,customer:window.widget.customer.getCustomerInfo(),payment:{name:o+" "+a,creditcard:_qById("creditcard_creditcardnumber").dataset.cardnumber,creditCardBrand:_qById("creditcard_creditcardnumber").dataset.cardtype,expiration:u,cvv:_qById("creditcard_cvv").value},shippingAddress:window.widget.shipping.getShippingAddress(),billingAddress:s,funnelBoxId:_qById("txtProductWarranty").checked?_qById("txtProductWarranty").value:0};_qById("ddl_installpayment")&&(p.payment.Instalments=_qById("ddl_installpayment").value);return p}();s.Order.placeOrder(a,e,function(e){if(m.localStorage().set("mainOrderLink",location.pathname),e&&e.success)if(m.localStorage().set("user_firstname",a.customer.firstName),m.localStorage().set("user_lastname",a.customer.lastName),i={upsells:(n=e).upsells,upsellIndex:0,countryCode:siteSetting.countryCode,orderNumber:n.orderNumber,cusEmail:_qById("customer_email").value,cardId:n.cardId,paymentProcessorId:n.paymentProcessorId,addressId:n.customerResult.shippingAddressId,savedTotal:f.productPrices.FullRetailPrice.Value-f.productPrices.DiscountedPrice.Value,quantity:f.quantity,orderedProducts:[{type:"main",sku:f.sku,name:_qById("productname_"+f.productId)?_qById("productname_"+f.productId).value:""}],installmentValue:_qById("ddl_installpayment")?_qById("ddl_installpayment").value:"",installmentText:window.widget&&window.widget.installmentpayment?window.widget.installmentpayment.optionText:""},m.localStorage().set("orderInfo",JSON.stringify(i)),e.callBackUrl)document.location=e.callBackUrl;else if(e.paymentContinueResult&&""!==e.paymentContinueResult.actionUrl)document.location=e.paymentContinueResult.actionUrl;else if(0<e.upsells.length&&""!==e.upsells[0].upsellUrl){var t=e.upsells[0].upsellUrl.substr(e.upsells[0].upsellUrl.lastIndexOf("/")+1);location.href=t}else m.redirectPage(siteSetting.successUrl);else m.localStorage().set("userPaymentType","creditcard"),m.redirectPage(siteSetting.declineUrl);var n,i})}("creditcard")})}}(window.utils),function(e){if(e){if(window.widgetFomo&&1==e.getQueryParameter("fomo")){var o=[];document.addEventListener("DOMContentLoaded",function(){t()})}}else console.log("utils module is not found");function t(){var e=window.widgetFomo.dataUrl;fetch(e).then(function(e){if(e.ok)return e.json()}).then(function(e){o=e.data,function(){var t=document.createElement("div");t.id="w_fomo_wrapper",t.classList.add("w_fomo_wrapper");var e=document.createElement("div");e.classList.add("w_fomo_content"),e.innerHTML='\n            <div class="w_thumb"><img src="'+window.widgetFomo.imageUrl+'" alt="chakrasole fomo product"></div>\n            <div class="w_content"></div>        \n        ',t.appendChild(e),_q("body").appendChild(t);var n=o.length,i=void 0,r=_q(".w_fomo_content .w_content");setTimeout(function(){i=Math.floor(Math.random()*n+1);var e=o[i];a(t,r,e)},2e3),setInterval(function(){i=Math.floor(Math.random()*n+1);var e=o[i];a(t,r,e)},8e3)}()}).catch(function(e){console.log(e)})}function a(e,t,n){var i="";window.innerWidth<400&&(i="<br>"),t.innerHTML=n.name+i+n.in+n.place+", "+n.country+"<br/>"+n.buy+" <strong> "+n.product+" </strong>",e.classList.add("notify"),setTimeout(function(){e.classList.remove("notify")},3e3)}}(window.utils),function(e){e?(_q("body").classList.remove("hidden"),window.widgetLoader&&1==e.getQueryParameter("loader")&&function(){var e=window.widgetLoader.steps,t=_qById("widget-loader");t.style.display="block";var n=0,i=_q(".progress-bar"),r=_q(".loader-wrapper .text"),o=e[n];r.innerHTML=o.text,i.style.width=o.percent+"%";var a=setInterval(function(){o=e[n+=1],3===n&&(clearInterval(a),setTimeout(function(){i.classList.add("finish")},1e3),setTimeout(function(){t.style.opacity="0",setTimeout(function(){t.style.display="none"},1e3)},1500)),r.innerHTML=o.text,i.style.width=o.percent+"%"},2e3)}()):console.log("utils module is not found")}(window.utils),function(e){function t(e){e&&(_q(".textDiscountPrice")&&(_q(".textDiscountPrice").innerHTML=e.discountPrice),_q(".textFullPrice")&&(_q(".textFullPrice").innerHTML=e.fullPrice),""!=e.currencyCode&&"usd"===e.currencyCode.toLowerCase()||_q(".js-currency-usd")&&(_q(".js-currency-usd").style.display="none"))}e?siteSetting?(function(){var e=_q(".js-sale-off-heading");if(e&&(e.innerHTML=e.innerHTML.replace("{price}",'<span class="textDiscountPrice"></span>'),e.innerHTML=e.innerHTML.replace("{fullprice}",'<span class="textFullPrice"></span>')),window.widget&&window.widget.installmentpayment){var t=window.widget.installmentpayment.defaultMonths[window.widget.installmentpayment.defaultMonths.length-1],n=_q(".top-promo");n&&(n.innerHTML=n.innerHTML.replace("{installmentMonth}",t)),e&&(e.innerHTML=e.innerHTML.replace("{installmentMonth}",t));var i=_q(".w_creditcard .w_caption");i&&(i.innerHTML=i.innerHTML.replace("{installmentMonth}",t))}}(),e.events.on("bindOrderPage",t)):console.log("window.siteSetting object is not found"):console.log("modules is not found")}(window.utils);var estimateFn={btnEstimated:null,btnClose:null,btnReset:null,btnCalculate:null,frmInput:null,result:null,txtZipCode:null,initFn:function(){var n=estimateFn;try{n.btnEstimated=document.querySelector(".estimated-total strong"),n.btnClose=document.querySelector(".estimated-form .close"),n.btnReset=document.querySelector(".estimated-form .btnReset"),n.btnCalculate=document.querySelector(".estimated-form .btnCalculate"),n.frmInput=document.querySelector(".estimated-form .frmInput"),n.result=document.querySelector(".estimated-form .result"),n.txtZipCode=document.querySelector(".estimated-form .txtZipCode"),n.btnEstimated.onclick=function(){n.showPopupEstimated()},n.btnClose.onclick=function(){n.hidePopupEstimated(),n.btnReset.click()},n.btnReset.onclick=function(){n.frmInput.style.display="block",n.result.style.display="none",n.txtZipCode.value=""},n.btnCalculate.onclick=function(){var e=document.querySelector(".estimated-form .errorMsg");if(""!==n.txtZipCode.value.trim()&&n.isValidPostalCode(n.txtZipCode.value,"")){var t=document.querySelector(".estimated-form .loader");e.style.display="none",t.style.display="block",setTimeout(function(){n.estimatedPrice(),t.style.display="none"},200)}else e.style.display="block"}}catch(e){}},showPopupEstimated:function(){document.querySelector(".estimated-form").style.display="block"},hidePopupEstimated:function(){document.querySelector(".estimated-form").style.display="none"},estimatedPrice:function(){for(var e=document.querySelectorAll("input[type=radio]"),t=0;t<e.length;t++){var n=e[t];try{if(1==n.checked){var i=JSON.parse(n.getAttribute("data-product")),r=i.productPrices.DiscountedPrice.Value.toString().replace(/\,/g,"").replace(/\./g,""),o=(i.productPrices.DiscountedPrice.FormattedValue.toString().replace(/\,/g,"").replace(/\./g,"").replace(r,"XXXXXX"),document.querySelector(".estimated-form .result .freeship")),a=document.querySelector(".estimated-form .result .shipcost");estimateFn.frmInput.style.display="none",estimateFn.result.style.display="block",i.shippings&&0<i.shippings.length&&(0<i.shippings[0].price?(a.innerHTML=i.shippings[0].formattedPrice,o.style.display="none",a.style.display="block"):(o.style.display="block",a.style.display="none"));break}}catch(e){}}},isValidPostalCode:function(e,t){return e=e.toUpperCase(),/^(?:[A-Z0-9]+([- ]?[A-Z0-9]+)*)?$/.test(e)}};function getPriceCheckedItem(){var n=setInterval(function(){var e=_q(".productRadioListItem.checked-item span.spanUnitDiscountRate").innerHTML,t=_q(".js-sale-off-heading");t.innerHTML=t.innerHTML.replace("{eachPriceCheckItem}",'<span class="textUnitPrice"></span>'),""!=e&&"$00.00"!=e&&(_q(".textUnitPrice").innerHTML=e,clearInterval(n))},1e3)}function exitPopupOrder(){var e=_qAll(".offer-exit-popup"),t=_qAll(".offer-normar");e&&Array.prototype.slice.call(e).forEach(function(e){e.classList.remove("hidden")}),t&&Array.prototype.slice.call(t).forEach(function(e){e.classList.add("hidden")}),hiddenProductOnExitPopup()}function hiddenProductOnExitPopup(){var e=_qAll(".productRadioListItem");e&&Array.prototype.slice.call(e).forEach(function(e,t){if(!(t<4))return!0;e.classList.add("hidden")})}function checkExitPopup(){"1"===utils.getQueryParameter("et")&&exitPopupOrder(),_q("#btn-yes-exit-popup").addEventListener("click",function(e){exitPopupOrder()})}document.addEventListener("DOMContentLoaded",function(){estimateFn.initFn()},!1),function(a){if(a){var e;(e=_q(".w_exit_popup .w_promo_text")).innerHTML=e.innerHTML.replace(/{exitpopup_price}/g,'<span class="txtExitpopupPrice"></span>');var s=null,d=null;document.addEventListener("DOMContentLoaded",function(){!function(){if("0"!==a.getQueryParameter("et"))if("1"!==a.getQueryParameter("et")){a.isDevice()&&window.addEventListener("touchmove",c),s=setTimeout(function(){document.addEventListener("mouseout",l)},3e4);var e=_qAll("input"),t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0)r.value.addEventListener("change",function(){clearTimeout(s),clearTimeout(d),document.removeEventListener("mouseout",l),window.removeEventListener("touchmove",c)})}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}_qById("btn-yes-exit-popup").addEventListener("click",function(e){e.preventDefault(),u()}),_qById("btn-no-exit-popup").addEventListener("click",function(e){e.preventDefault(),p()})}else u()}()})}else console.log("utils module is not found");function l(e){e.pageY-window.pageYOffset<=0&&(document.removeEventListener("mouseout",l),n())}function c(e){var t=_qById("js-widget-products").getBoundingClientRect();0<=t.top&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&(window.removeEventListener("touchmove",c),d=setTimeout(function(){n()},2e4))}function u(){a.getQueryParameter("et")||history.replaceState(null,null,0<=location.href.indexOf("?")?location.href+"&et=1":location.href+"?et=1");var e=_q(".productRadioListItem.checked-item"),t=_q(".productRadioListItem.special_offer");if(e&&t){e.classList.remove("default");var n=e.querySelector(".best-seller-text");n&&n.parentNode.removeChild(n),t.classList.remove("hidden"),t.classList.add("default"),t.querySelector('input[type="radio"]').click()}if(window.widgetExitPopup&&window.widgetExitPopup.updateNewPrice){var i=function(e){var t=null;try{var n=JSON.parse(e.dataset.product),i=n.shippings[0],r="";r=0==i.price?"free":i.formattedPrice,t={priceShipping:r,discountPrice:n.productPrices.DiscountedPrice.FormattedValue}}catch(e){console.log("_getProductInfo : ",e)}return t}(radioProduct);i&&(a.events.emit("bindProductDiscountInfo",i),a.events.emit("triggerProductBannerSidebar",i),a.events.emit("bindOrderPage",i))}p()}function n(){var e=_q(".productRadioListItem.special_offer input");if(e){var t=JSON.parse(e.dataset.product).productPrices.DiscountedPrice.FormattedValue;_q(".txtExitpopupPrice")&&(_q(".txtExitpopupPrice").innerHTML=t)}_q(".w_modal").style.display="block"}function p(){_q(".w_modal").style.display="none",document.removeEventListener("mouseout",l),window.removeEventListener("touchmove",c)}}(window.utils),checkExitPopup(),getPriceCheckedItem();
